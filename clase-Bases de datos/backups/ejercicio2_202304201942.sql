--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.897.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 20/04/2023 19:42:49
-- Server version: 8.0.28
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

DROP DATABASE IF EXISTS ejercicio2;

CREATE DATABASE ejercicio2
CHARACTER SET utf8mb4
COLLATE utf8mb4_0900_ai_ci;

--
-- Set default database
--
USE ejercicio2;

--
-- Create table `profesor`
--
CREATE TABLE profesor (
  DNI varchar(10) NOT NULL,
  nombre varchar(50) DEFAULT NULL,
  direccion varchar(100) DEFAULT NULL,
  telefono varchar(15) DEFAULT NULL,
  PRIMARY KEY (DNI)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `modulo`
--
CREATE TABLE modulo (
  codigo int NOT NULL,
  nombre varchar(50) DEFAULT NULL,
  dniPro varchar(10) NOT NULL,
  PRIMARY KEY (codigo)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE modulo
ADD CONSTRAINT fkpro FOREIGN KEY (dniPro)
REFERENCES profesor (DNI);

--
-- Create table `alumno`
--
CREATE TABLE alumno (
  expediente int NOT NULL AUTO_INCREMENT,
  nombre varchar(50) DEFAULT NULL,
  apellidos varchar(100) DEFAULT NULL,
  fechaNac date DEFAULT NULL,
  PRIMARY KEY (expediente)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `delegado`
--
CREATE TABLE delegado (
  expedienteDel int NOT NULL,
  expedienteaL int NOT NULL,
  PRIMARY KEY (expedienteDel, expedienteaL)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `uk1` on table `delegado`
--
ALTER TABLE delegado
ADD UNIQUE INDEX uk1 (expedienteaL);

--
-- Create foreign key
--
ALTER TABLE delegado
ADD CONSTRAINT fkal FOREIGN KEY (expedienteDel)
REFERENCES alumno (expediente);

--
-- Create foreign key
--
ALTER TABLE delegado
ADD CONSTRAINT fkal2 FOREIGN KEY (expedienteaL)
REFERENCES alumno (expediente);

--
-- Create table `cursa`
--
CREATE TABLE cursa (
  expedienteAl int NOT NULL,
  codigoMo int NOT NULL,
  PRIMARY KEY (expedienteAl, codigoMo)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE cursa
ADD CONSTRAINT fkcu FOREIGN KEY (expedienteAl)
REFERENCES alumno (expediente);

--
-- Create foreign key
--
ALTER TABLE cursa
ADD CONSTRAINT fkcu2 FOREIGN KEY (codigoMo)
REFERENCES modulo (codigo);

-- 
-- Dumping data for table profesor
--
INSERT INTO profesor VALUES
('72183158p', 'mar', 'c/ del monte 3', '+34 965456123'),
('85296314h', 'celia', 'c/ federico vial 8', '+34 965784123'),
('98765432g', 'lara', 'c/ guerra 4', '+34 698123547');

-- 
-- Dumping data for table modulo
--
INSERT INTO modulo VALUES
(1, 'programacion', '72183158p'),
(2, 'bases de datos ', '85296314h'),
(3, 'lenguaje de marcas', '98765432g');

-- 
-- Dumping data for table alumno
--
INSERT INTO alumno VALUES
(1, 'carol', 'peralta martinez', '1996-06-20'),
(2, 'jorge', 'nitales', '2000-01-03'),
(3, 'kerry', 'caberga', '2009-10-21');

-- 
-- Dumping data for table delegado
--
INSERT INTO delegado VALUES
(2, 1),
(1, 3);

-- 
-- Dumping data for table cursa
--
INSERT INTO cursa VALUES
(3, 1),
(2, 2),
(1, 3);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;